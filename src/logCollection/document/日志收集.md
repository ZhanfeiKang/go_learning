# 日志收集

## 1 项目背景

每个业务系统都有日志，当系统出现问题时，需要通过日志信息定位和解决问题。当系统及其比较少时，登录到服务器上查看即可满足，当系统机器规模巨大，登录到机器上查看几乎不现实（分布式的系统，一个系统部署在十几台机器上）。

## 2 解决方案

把机器上的日志实时收集，统一的存储到中心系统。再对这些日志建立索引，通过搜索即可快速找到对应的日志记录，通过提供一个友好的web页面实现检索与展示。

## 3 面临的问题

实时日志 量非常大，每天处理几十亿条。日志准实时收集，延迟控制在分钟级别。能够支持水平扩展。

## 4 业界方案

### ELK

![](https://gitee.com/kkite/blogimg/raw/master/ELK.png)

### ELK方案的问题

- 运维成本高，每增加一个日志收集项，都需要手动修改配置。
- 监控缺失，无法准确获取logstash的状态。
- 无法做到定制化开发与维护。

## 5 日志收集系统架构设计

### 5.1 架构设计

